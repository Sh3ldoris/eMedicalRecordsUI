<div class="new-patient mb-4 px-4 pt-1 pb-3 shadow-sm">
  <p class="pb-2">Nový záznam <i class="fa fa-pencil" aria-hidden="true" style="padding: 0 0.2rem; font-size: 1.1rem;"></i></p>
  <form (ngSubmit)="confirm()" [formGroup]="reportForm">
    <div class="row">
      <div class="col-3">
        <mat-form-field appearance="outline" class="read-only">
          <mat-label>Vykonal (len na čítanie)</mat-label>
          <input matInput readonly="true" value="{{doctor.person.firstName}} {{doctor.person.lastName}}">
        </mat-form-field>
      </div>
      <div class="col-9">
        <mat-form-field appearance="outline" class="read-only">
          <mat-label>Ambulancia (len na čítanie)</mat-label>
          <input matInput readonly="true" value="{{doctor.ambulance.name}}">
        </mat-form-field>
      </div>
      <div class="col-12">
        <mat-form-field appearance="outline">
          <mat-label>Názov záznamu</mat-label>
          <input matInput formControlName="name">
        </mat-form-field>
      </div>
      <div class="col-12">
        <mat-form-field appearance="outline">
          <mat-label>Lekárska správa</mat-label>
          <textarea matInput
                    cdkAutosizeMinRows="5"
                    cdkAutosizeMaxRows="10"
                    cdkTextareaAutosize="true"
                    formControlName="report">
             </textarea>
        </mat-form-field>
      </div>
    </div>
    <p style="margin-top: 0!important;">Diagnózy</p>

    <div class="row">
      <div class="col-2">
        <mat-form-field appearance="outline">
          <mat-label>Kód diagnózy</mat-label>
          <input matInput formControlName="code">
        </mat-form-field>
      </div>
      <div class="col-5">
        <mat-form-field appearance="outline">
          <mat-label>Lokalizácia diagnózy</mat-label>
          <input matInput formControlName="localization">
        </mat-form-field>
      </div>
      <div class="col-5">
        <div class="row flex-md-nowrap m-0">
          <mat-form-field appearance="outline" class="col-auto">
            <mat-label>Názov diagnózy</mat-label>
            <input matInput formControlName="diagnosisName">
          </mat-form-field>
          <button (click)="$event.preventDefault(); addNewDiagnosis();" class="btn basic col-auto" style="">
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </div>

    <div class="row pb-4">
      <div class="col-12">
        <div class="example-container mat-elevation-z8">
          <table mat-table [dataSource]="assignedDiagnosis">

            <ng-container matColumnDef="code">
              <th mat-header-cell *matHeaderCellDef>Kód</th>
              <td mat-cell *matCellDef="let element"> {{element.diagnosis.code}} </td>
            </ng-container>

            <ng-container matColumnDef="localization">
              <th mat-header-cell *matHeaderCellDef>Lokalizácia</th>
              <td mat-cell *matCellDef="let element"> {{element.localization}} </td>
            </ng-container>

            <ng-container matColumnDef="diagnosisName">
              <th mat-header-cell *matHeaderCellDef>Názov</th>
              <td mat-cell *matCellDef="let element"> {{element.diagnosis.name}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      </div>
    </div>

    <div class="col-12 d-flex justify-content-end">
      <div class="row flex-md-nowrap m-0">
        <button (click)="close.emit(false);" class="btn basic d-inline-block col-auto close">
          Zrušíť
        </button>
        <button [disabled]="reportForm.invalid" type="submit" class="btn basic d-inline-block col-auto" [ngClass]="{'disabled' : reportForm.invalid}">
          Uložiť
        </button>
      </div>
    </div>
  </form>

</div>
